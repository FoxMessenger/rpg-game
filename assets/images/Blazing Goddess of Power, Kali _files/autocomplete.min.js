var entry;function initAutoComplete(){$(document.body).append($("#suggestions"));$("#searchSite #submit").click(function(){HTMLFormElement.prototype.submit.call($("#searchSite form")[0])});$("#searchSite #kw").focus(function(a){$(this).select();$(this).mouseup(function(){a.preventDefault();return false})});$("#searchSite #kw, #suggestions").click(function(a){a.stopPropagation()});$("#searchSite #kw").keydown(function(c){if(c.keyCode==38){kwSelect(-1)}else{if(c.keyCode==40){kwSelect(1)}}if(c.keyCode==38||c.keyCode==40){var b=$("#suggestions div").outerHeight()*(entry-1);var a=$("#suggestions").scrollTop();if(a>b||a+300<=b){$("#suggestions").scrollTop(b)}return false}});$("#searchSite #kw").keyup(function(c){if(c.keyCode==13||c.keyCode==186||c.keyCode==188){if($("#suggestions .selected").length){$("#searchSite #kw").val($("#suggestions .selected").text().replace(/^\d+\. /,""))}HTMLFormElement.prototype.submit.call($("#searchSite form")[0]);c.preventDefault();return}if(c.keyCode>=37&&c.keyCode<=40){return false}var a=$(this).val();if(a==""){$("#suggestions").hide()}else{$("#suggestions").css("left",$("#searchSite").offset().left).css("top",$("#searchSite").offset().top+$("#searchSite").outerHeight()+7).width($("#searchSite").width()-2);$("#suggestions").children().remove();var c=1;for(var b=0;b<monsterData.length;b++){if(monsterData[b][1].toLowerCase().indexOf(a.toLowerCase())>=0||parseInt(a)==monsterData[b][0]){$("#suggestions").append($("<div data-entry='"+c+"'>"+monsterData[b][0]+". "+monsterData[b][1].replace(new RegExp("("+a+")","i"),"<span class=highlight>$1</span>")+"</div>"));c++}else{if(monsterData[b][2].indexOf(a)>=0){$("#suggestions").append($("<div data-entry='"+c+"'>"+monsterData[b][0]+". "+monsterData[b][2].replace(a,"<span class=highlight>"+a+"</span>")+"</div>"));c++}}}for(var b=0;b<pageData.length;b++){if(pageData[b].toLowerCase().indexOf(a.toLowerCase())>=0){$("#suggestions").append($("<div data-entry='"+c+"'>"+pageData[b].replace(new RegExp("("+a+")","i"),"<span class=highlight>$1</span>")+"</div>"));c++}}$("#suggestions div").mouseenter(function(){$("#suggestions .selected").removeClass("selected");$(this).addClass("selected");entry=parseInt($(this).data("entry"))});$("#suggestions div").click(function(){$("#searchSite #kw").val($(this).text().replace(/^\d+\. /,""));HTMLFormElement.prototype.submit.call($("#searchSite form")[0]);return});entry=0;if(c==1){$("#suggestions").hide()}else{$("#suggestions").show()}}});$(document).click(function(){$("#suggestions").hide()})}function kwSelect(a){$("#suggestions .selected").removeClass("selected");if(a==-1){if(entry<=1){entry=$("#suggestions div").length;$("#suggestions div:nth-child("+entry+")").addClass("selected")}else{entry--;$("#suggestions div:nth-child("+entry+")").addClass("selected")}}else{if(entry==$("#suggestions div").length){entry=1;$("#suggestions div:nth-child("+entry+")").addClass("selected")}else{entry++;$("#suggestions div:nth-child("+entry+")").addClass("selected")}}};